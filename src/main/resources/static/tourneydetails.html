<!DOCTYPE html>
<html>
  <head>
    <title>Tourney Details</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debate Break Calculator</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        background: #fffef7;
        margin: 0;
        padding: 0;
      }
      
      .container {
        background: #FFFEF7;
        padding: 0 5rem;
        text-align: left;
        margin-left: 3.125rem;
        margin-right: 3.125rem;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: flex-start;
        font-family: "Montserrat", sans-serif;
      }

      h1 {
        font-size: clamp(2rem, 6vw, 6rem);
        color: #9BB594;
        margin-top: 5rem;
        margin-bottom: 1.875rem;
        font-weight: 700;
        line-height: 1.2;
        letter-spacing: -1px;
        font-family: "Montserrat", sans-serif;
        text-align: left;
      }

      h2 {
        font-size: clamp(1.5rem, 1.5vw, 2rem);
        color: #4D5B49;
        font-weight: 500;
        margin-top: clamp(0.5rem, 1vh, 1rem);
        margin-bottom: clamp(1rem, 1.5vh, 1.5rem);
        line-height: 1.2;
        letter-spacing: -1px;
        font-family: "Montserrat", sans-serif;
        text-align: left;
      }

      h3 {
        font-size: clamp(1rem, 1.5vw, 1.8rem);
        color: #4D5B49;
        font-weight: 300;
        margin-top: clamp(0.5rem, 1vh, 1rem);
        line-height: 1.2;
        letter-spacing: -1px;
        font-family: "Montserrat", sans-serif;
        text-align: left;
      }

      @media (max-width: 600px) {
        h1 {
          font-size: 12vw;
        }
        
        h2 {
          font-size: 4vw;
        }
        
        h3 {
          font-size: 3vw;
        }
        
        .container {
          padding: 0 5vw;
          margin-left: 3vw;
          margin-right: 3vw;
        }
        
        .required-text {
          font-size: 2.5vw;
        }
        
        .required-asterisk {
          font-size: 3vw;
        }
        
        input[type="text"], select {
          font-size: 3vw;
          padding: 1.5vh 1.5vw;
        }
        
        button {
          font-size: 3.5vw;
          padding: 2vh 4vw;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Tournament details</h1>
      <div style="margin-top: -0.5vh; margin-bottom: 1.5vh;">
        <span class="required-asterisk" style="color: #cc0000; font-size: clamp(0.8rem, 1vw, 1.4rem);">*</span>
        <span class="required-text" style="color: #cc0000; font-size: clamp(0.8rem, 1vw, 1.4rem); font-family: 'Montserrat', sans-serif; font-weight: 300; margin-left: clamp(0.2rem, 0.3vw, 0.4rem);">Required</span>
      </div>
      <h2>Debate Format <span style="color: #cc0000;">*</span></h2>
      <div style="display: flex; gap: 3vw; margin-bottom: 1vh">
        <label
          style="
            display: flex;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
            font-size: clamp(1rem, 1.1vw, 1.5rem);
            font-weight: 300;
            color: #4D5B49;
          "
        >
          <input
            type="radio"
            name="format"
            value="bp"
            style="margin-right: clamp(0.5rem, 0.8vw, 1rem)"
          />
          British Parliamentary
        </label>
        <label
          style="
            display: flex;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
            font-size: clamp(1rem, 1.1vw, 1.5rem);
            font-weight: 300;
            color: #4D5B49;
          "
        >
          <input
            type="radio"
            name="format"
            value="ws"
            style="margin-right: clamp(0.5rem, 0.8vw, 1rem)"
          />
          World Schools
        </label>
      </div>
      <h2>Number of Debate Rounds <span style="color: #cc0000;">*</span></h2>
      <input
        type="text"
        maxlength="2"
        placeholder="5"
        id="totalRounds"
        style="
          font-family: 'Montserrat', sans-serif;
          font-size: clamp(0.8rem, 1vw, 1.3rem);
          font-weight: 300;
          color: #4D5B49;
          border: 1px solid #9BB594;
          padding: clamp(0.5rem, 0.8vh, 0.8rem) clamp(0.5vw, 0.5vw, 0.1rem);
          margin-bottom: clamp(0.5rem, 1vh, 1rem);
          width: clamp(1rem, 1.5vw, 1.8rem);
          text-align: left;
          background-color: #FFFEF7;
        "
      />
      <style>
        input::placeholder {
          font-weight: 300;
          font-style: italic;
        }
      </style>
      <h2>First Open Elimination Round <span style="color: #cc0000;">*</span></h2>
      <select
        id="openElimRound"
        style="
          font-family: 'Montserrat', sans-serif;
          font-size: clamp(0.8rem, 1vw, 1.3rem);
          font-weight: 300;
          color: #4D5B49;
          border: 1px solid #9BB594;
          padding: clamp(0.5rem, 0.8vh, 0.8rem) clamp(0.6rem, 1vw, 1rem);
          margin-bottom: 1vh;
          background-color: #FFFEF7;
        "
      >
        <option value="--">--</option>
        <option value="finals">Finals</option>
        <option value="semifinals">Semifinals</option>
        <option value="quarterfinals">Quarterfinals</option>
        <option value="octofinals">Octofinals</option>
        <option value="partial-double-octofinals">Partial Double Octofinals</option>
      </select>
      <h2>First Junior Elimination Round</h2>
      <select
        id="jrElimRound"
        style="
          font-family: 'Montserrat', sans-serif;
          font-size: clamp(0.8rem, 1vw, 1.3rem);
          font-weight: 300;
          color: #4D5B49;
          border: 1px solid #9BB594;
          padding: clamp(0.5rem, 0.8vh, 0.8rem) clamp(0.6rem, 1vw, 1rem);
          margin-bottom: 1.5vh;
          background-color: #FFFEF7;
        "
      >
        <option value="--">--</option>
        <option value="junior-finals">Junior Finals</option>
        <option value="junior-semifinals">Junior Semifinals</option>
        <option value="junior-quarterfinals">Junior Quarterfinals</option>
        <option value="junior-octofinals">Junior Octofinals</option>
        <option value="junior-partial-double-octofinals">Junior Partial Double Octofinals</option>
      </select>
      
      <button
        onclick="saveTournamentDetails()"
        style="
          background-color: #768C70;
          color: #FFFEF7;
          border: none;
          padding: clamp(1rem, 1.5vh, 1.5rem) clamp(1.8rem, 2.2vw, 2.5rem);
          font-size: clamp(1rem, 1.4vw, 1.8rem);
          font-family: 'Montserrat', sans-serif;
          font-weight: 400;
          cursor: pointer;
          margin-top: 2vh;
          transition: all 0.3s ease;
        "
        onmouseover="this.style.transform='translateY(-2px)'"
        onmouseout="this.style.transform='translateY(0px)'"
      >
        Calculate
      </button>
      
      <script>
        function saveTournamentDetails() {
          const format = document.querySelector('input[name="format"]:checked')?.value;
          const totalRounds = document.getElementById('totalRounds').value;
          const openElimRound = document.getElementById('openElimRound').value;
          const jrElimRound = document.getElementById('jrElimRound').value;
          
          if (!format || !totalRounds || openElimRound === '--') {
            let missingFields = [];
            if (!format) missingFields.push('Debate Format');
            if (!totalRounds) missingFields.push('Number of Debate Rounds');
            if (openElimRound === '--') missingFields.push('First Open Elimination Round');
            
            alert('Please fill in the following required field(s):\n• ' + missingFields.join('\n• '));
            return;
          }
          
          // Update junior break status based on whether junior elimination round is selected
          const showJunior = jrElimRound !== '--';
          sessionStorage.setItem('showJunior', showJunior.toString());
          
          const formData = new FormData();
          formData.append('format', format);
          formData.append('totalRounds', parseInt(totalRounds));
          formData.append('openElimRound', openElimRound);
          formData.append('jrElimRound', jrElimRound);
          
          fetch('/api/tournament-details', {
            method: 'POST',
            body: formData
          })
          .then(response => response.text())
          .then(data => {
            console.log('Success:', data);
            window.location.href = 'results.html';
          })
          .catch((error) => {
            console.error('Error:', error);
            alert('Error saving tournament details');
          });
        }
      </script>
    </div>
  </body>
</html>
